<div class=" bg-indigo">
    <p-toolbar>
        <div class="p-toolbar-group-left">
            <p-megaMenu [model]="items" styleClass="flex">
            </p-megaMenu>
        </div>

        <div class="p-toolbar-group-right">
            <div style="margin-right: 10px; font-size: 14px;">
                {{profileuser.first_name}}
            </div>
            <p-avatar class="cursor-pointer" icon="pi pi-user" (click)="op.toggle($event)" styleClass="mr-2"
                size="danger" shape="circle">
            </p-avatar>
            <!-- <p-avatar icon="pi pi-user" (click)="menu.toggle($event)" styleClass="mr-2" size="danger" shape="circle">
            </p-avatar>
            <p-menu #menu [model]="User" [popup]="true"></p-menu> -->
        </div>
    </p-toolbar>
    <p-toast></p-toast>
    <mat-tab-group mat-align-tabs="start" [(selectedIndex)]="tabcount" style="z-index: 0;">
        <ng-template #templateRef let-context='context'>
            <mat-tab>
                <ng-template mat-tab-label>
                    <span>{{context.title}}</span>
                    <!-- <i (click)="removetab()" style="margin-left: 10px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-x" viewBox="0 0 16 16">
                            <path
                                d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                        </svg>
                    </i> -->
                </ng-template>
                <app-organization *ngIf="context.selector=='app-organization'" [data]="true" (closeEvent)="removetab()">
                </app-organization>

                <app-category-sotr-list *ngIf="context.selector=='app-category-sotr-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-category-sotr-list>

                <app-koeff-category-list *ngIf="context.selector=='app-koeff-category-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-koeff-category-list>

                <app-stazh-category-list *ngIf="context.selector=='app-stazh-category-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-stazh-category-list>

                <app-marki-avto-list *ngIf="context.selector=='app-marki-avto-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-marki-avto-list>

                <app-dopl-nadbavka-list *ngIf="context.selector=='app-dopl-nadbavka-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-dopl-nadbavka-list>

                <app-tip-dopl *ngIf="context.selector=='app-tip-dopl'" [data]="true" (closeEvent)="removetab()">
                </app-tip-dopl>

                <app-tip-tru *ngIf="context.selector=='app-tip-tru'" [data]="true" (closeEvent)="removetab()">
                </app-tip-tru>

                <app-stavka-list *ngIf="context.selector=='app-stavka-list'" [data]="true" (closeEvent)="removetab()">
                </app-stavka-list>

                <app-vid-transporta *ngIf="context.selector=='app-vid-transporta'" [data]="true"
                    (closeEvent)="removetab()">
                </app-vid-transporta>

                <app-tip-topliva *ngIf="context.selector=='app-tip-topliva'" [data]="true" (closeEvent)="removetab()">
                </app-tip-topliva>

                <app-oblasti-regiony-list *ngIf="context.selector=='app-oblasti-regiony-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-oblasti-regiony-list>

                <app-ed-izm-list *ngIf="context.selector=='app-ed-izm-list'" [data]="true" (closeEvent)="removetab()">
                </app-ed-izm-list>

                <app-regions-list *ngIf="context.selector=='app-regions-list'" [data]="true" (closeEvent)="removetab()">
                </app-regions-list>

                <app-budjet-reg-list *ngIf="context.selector=='app-budjet-reg-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-budjet-reg-list>

                <app-enstru-list *ngIf="context.selector=='app-enstru-list'" [data]="true" (closeEvent)="removetab()">
                </app-enstru-list>

                <app-otbor-ens-list *ngIf="context.selector=='app-otbor-ens-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-otbor-ens-list>

                <app-period-pokaz-list *ngIf="context.selector=='app-period-pokaz-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-period-pokaz-list>



                <app-podrazdelenie-list *ngIf="context.selector=='app-podrazdelenie-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-podrazdelenie-list>

                <app-limit-list *ngIf="context.selector=='app-limit-list'" [data]="true"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id)"
                    (closeEvent)="removetab()" [tabcount]="this.tabcount">
                </app-limit-list>

                <app-limit-element *ngIf="context.selector=='app-limit-element'" [limit_id]="number"
                    (closeEvent)="removetab()">
                </app-limit-element>

                <app-dolznost-list *ngIf="context.selector=='app-dolznost-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-dolznost-list>

                <app-category-income *ngIf="context.selector=='app-category-income'" [data]="true"
                    (closeEvent)="removetab()">
                </app-category-income>

                <app-podclass-list *ngIf="context.selector=='app-podclass-list'" (closeEvent)="removetab()">
                </app-podclass-list>

                <app-class-income-list *ngIf="context.selector=='app-class-income-list'" (closeEvent)="removetab()">
                </app-class-income-list>

                <app-specification-income-list *ngIf="context.selector=='app-specification-income-list'"
                    (closeEvent)="removetab()">
                </app-specification-income-list>

                <app-classification-income-list *ngIf="context.selector=='app-classification-income-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-classification-income-list>

                <app-budjet-list *ngIf="context.selector=='app-budjet-list'" (closeEvent)="removetab()">
                </app-budjet-list>

                <app-izm-inc-doc-list *ngIf="context.selector=='app-izm-inc-doc-list'"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id)"
                    (closeEvent)="removetab()">
                </app-izm-inc-doc-list>

                <app-import219-deteail *ngIf="context.selector=='app-import219-deteail'" (closeEvent)="removetab()">
                </app-import219-deteail>

                <app-izm-inc-doc-detail #someComp *ngIf="context.selector=='app-izm-inc-doc-detail'"
                    [izm_inc_id]="number" (closeEvent)="removetab()">
                </app-izm-inc-doc-detail>

                <app-functional-group-list *ngIf="context.selector=='app-functional-group-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-functional-group-list>

                <app-functional-podgroup-list *ngIf="context.selector=='app-functional-podgroup-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-functional-podgroup-list>

                <app-abp-list *ngIf="context.selector=='app-abp-list'" [data]="true" (closeEvent)="removetab()">
                </app-abp-list>

                <app-programm-list *ngIf="context.selector=='app-programm-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-programm-list>

                <app-podprogramm-list *ngIf="context.selector=='app-podprogramm-list'" [data]="true"
                    (closeEvent)="removetab()">
                </app-podprogramm-list>

                <app-fkr-list *ngIf="context.selector=='app-fkr-list'" [data]="true" (closeEvent)="removetab()">
                </app-fkr-list>


                <app-specification-exp-list *ngIf="context.selector=='app-specification-exp-list'"
                    (closeEvent)="removetab()">
                </app-specification-exp-list>

                <app-formlist *ngIf="context.selector=='app-formlist'" [data]="true"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id)"
                    (closeEvent)="removetab()">
                </app-formlist>

                <app-form-detail *ngIf="context.selector=='app-form-detail'" [form_doc_id]="number"
                    (closeEvent)="removetab()">
                </app-form-detail>

                <app-budget-request-list *ngIf="context.selector=='app-budget-request-list'" [data]="true"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id)"
                    (closeEvent)="removetab()" [tabcount]="this.tabcount">
                </app-budget-request-list>

                <app-budget-request-detail *ngIf="context.selector=='app-budget-request-detail'"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id, $event.params.data)"
                    [Budget_doc_id]="number" (closeEvent)="removetab()">
                </app-budget-request-detail>

                <app-svod-detail *ngIf="context.selector=='app-svod-detail'"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id, $event.params.data)"
                    [svod_id]="number" (closeEvent)="removetab()">
                </app-svod-detail>

                <app-svod-list *ngIf="context.selector=='app-svod-list'" [data]="true" [start]="context.data"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id)"
                    (closeEvent)="removetab()" [tabcount]="this.tabcount">
                </app-svod-list>

                <app-zakluchenie-list *ngIf="context.selector=='app-zakluchenie-list'" [data]="true"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id)"
                    (closeEvent)="removetab()" [tabcount]="this.tabcount">
                </app-zakluchenie-list>

                <app-zakluchenie-detail *ngIf="context.selector=='app-zakluchenie-detail'"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id, $event.params.data)"
                    [zakluchenie_id]="number" (closeEvent)="removetab()">
                </app-zakluchenie-detail>

                <app-budget-income-detail *ngIf="context.selector=='app-budget-income-detail'"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id, $event.params.data)"
                    [budjet_income_id]="number" (closeEvent)="removetab()">
                </app-budget-income-detail>

                <app-budget-income-list *ngIf="context.selector=='app-budget-income-list'" [data]="true"
                    (newItemEvent)="openTab($event.params.selector, $event.params.nomer, $event.params.id)"
                    (closeEvent)="removetab()" [tabcount]="this.tabcount">
                </app-budget-income-list>

                <app-budget-ras4et-detail *ngIf="context.selector=='app-budget-ras4et-detail'"
                    (closeEvent)="removetab()">
                </app-budget-ras4et-detail>

                <app-prilozhenie60 *ngIf="context.selector=='app-prilozhenie60'" (closeEvent)="removetab()">
                </app-prilozhenie60>

                <app-prilozhenie60-new *ngIf="context.selector=='app-prilozhenie60-new'" (closeEvent)="removetab()">
                </app-prilozhenie60-new>

                <app-prilozhenie5758 *ngIf="context.selector=='app-prilozhenie5758'" (closeEvent)="removetab()">
                </app-prilozhenie5758>

                <app-user-list *ngIf="context.selector=='app-user-list'" [list]="true" (closeEvent)="removetab()">
                </app-user-list>


            </mat-tab>
        </ng-template>
    </mat-tab-group>
</div>

<p-overlayPanel #op [style]="{width: '220px'}">
    <ng-template pTemplate>
        <div class="align-items-center justify-content-left gap-2">
            <p-button label="Изменить пароль" styleClass="p-button-link" (click)="changepass()"><i
                    style="padding-right: 15px; font-size: 0.4cm;" class="pi pi-key"></i></p-button>
            <p-button label="История входа" styleClass="p-button-link" (click)="userHistory()"><i
                    style="padding-right: 15px; font-size: 0.4cm;" class="pi pi-id-card"></i></p-button>
            <p-button label="Выйти из системы" styleClass="p-button-link" (click)="logout()"><i
                    style="padding-right: 30px; font-size: 0.4cm;" class="pi pi-fw pi-power-off"></i></p-button>
        </div>
    </ng-template>
</p-overlayPanel>

<div #viewContainerRef>
</div>